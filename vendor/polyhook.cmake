SET(POLYHOOK_USE_EXTERNAL_ZYDIS ON CACHE BOOL "" FORCE)
SET(ZYDIS_LIBRARY "Zydis" CACHE STRING "" FORCE)
SET(ZYDIS_INCLUDE_DIR "$ENV{TMP}/vendor/tmp/Zydis/${CMAKE_BUILD_TYPE}" CACHE STRING "" FORCE)
SET(ZYCORE_LIBRARY "Zycore" CACHE STRING "" FORCE)
SET(ZYCORE_INCLUDE_DIR "$ENV{TMP}/vendor/tmp/Zycore/${CMAKE_BUILD_TYPE}" CACHE STRING "" FORCE)

file(COPY "${zydis_SOURCE_DIR}/include" DESTINATION $ENV{TMP}/vendor/tmp/Zydis/${CMAKE_BUILD_TYPE})
file(COPY "${zydis_SOURCE_DIR}/dependencies/zycore/include" DESTINATION $ENV{TMP}/vendor/tmp/Zycore/${CMAKE_BUILD_TYPE})

SET(POLYHOOK_BUILD_STATIC_RUNTIME OFF CACHE BOOL "" FORCE)

CPMAddPackage("gh:X-rays5-forks/PolyHook_2_0#5717242")

target_link_libraries(${PROJECT_NAME} PUBLIC PolyHook_2)